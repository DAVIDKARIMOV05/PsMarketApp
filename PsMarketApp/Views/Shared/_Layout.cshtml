<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - En Ucuz PSN Bakiye</title>
    <meta name="description" content="PS Plus Türkiye ve Azerbaycan için en ucuz PSN bakiye, GTA 5 ve oyun fiyatları.">

    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/still.css" asp-append-version="true" />
    <link rel="icon" type="image/jpg" href="~/images/icon2.jpg">

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Q45PWXBNF6"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-Q45PWXBNF6');
    </script>

   
</head>
<body>

    <header style="position: relative;">
        <div class="admin-btn-container">
            @if (User.Identity.IsAuthenticated)
            {
                <a href="/Admin/Index" class="admin-link admin-slider me-2" style="background-color: purple; color: white;">
                    ⚙️ Yönetim Paneli
                </a>

                <a href="/Account/Logout" class="admin-link admin-logout">Çıkış Yap</a>
            }
            else
            {
                <a href="/Account/Login" class="admin-link admin-login">🔒 Admin Girişi</a>
            }
        </div>

        <div class="header-container">
            <a href="/">
                <img src="~/images/Gemini_Generated_Image_roucdbroucdbrouc.png" alt="PS Plus Banner" style="max-width:100%; height:auto;">
            </a>
        </div>
    </header>

    <div class="container-fluid">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>

    <footer class="mt-5 bg-dark text-white p-4">
        <div class="footer-content text-center">
            <h3>İLETİŞİM</h3>
            <p>WhatsApp: <a href="https://wa.me/+994513677405" style="color:white;">+994 51 367 74 05</a></p>
            <br>
            @if (ViewData["Title"]?.ToString() == "Ana Sayfa")
            {
                <a asp-controller="Home" asp-action="Hakkimizda" class="text-white">ℹ️ Hakkımızda</a>
            }
            else
            {
                <a asp-controller="Home" asp-action="Index" class="text-white">🏠 Ana Sayfa</a>
            }
        </div>
    </footer>

    <button onclick="sepetiAc()" class="sepet-buton" style="position:fixed; bottom:20px; right:20px; z-index:9999; background:orange; border:none; padding:15px; border-radius:50%; font-size:20px; cursor:pointer;">
        🛒 <span id="sepet-sayisi" style="font-weight:bold;">0</span>
    </button>

    <div id="sepet-modal" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background:white; padding:20px; border:2px solid black; z-index:10000; width:300px;">
        <div class="sepet-icerik">
            <span onclick="sepetiKapat()" style="float:right; cursor:pointer; font-size:20px;">&times;</span>
            <h2>Sepetiniz</h2>
            <ul id="sepet-listesi" style="list-style:none; padding:0;">
                <li>Sepetiniz boş.</li>
            </ul>
            <h3 id="toplam-fiyat">Toplam: 0 AZN</h3>
            <button onclick="whatsappSiparisVer()" class="btn btn-success w-100 mt-2">WhatsApp İle Siparişi Tamamla</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        let sepet = [];

        function sepeteEkle(urunAdi, fiyat) {
            sepet.push({ isim: urunAdi, fiyat: fiyat });
            document.getElementById("sepet-sayisi").innerText = sepet.length;
            alert(urunAdi + " sepete eklendi!");
        }

        function sepetiAc() {
            const modal = document.getElementById("sepet-modal");
            const liste = document.getElementById("sepet-listesi");
            const toplamTutar = document.getElementById("toplam-fiyat");

            modal.style.display = "block";
            liste.innerHTML = "";

            let toplam = 0;

            sepet.forEach((urun, index) => {
                let satir = document.createElement("li");
                satir.innerHTML = `${urun.isim} - <b>${urun.fiyat} AZN</b> <button onclick="urunuSil(${index})" class="btn btn-danger btn-sm ms-2">Sil</button>`;
                liste.appendChild(satir);
                toplam += urun.fiyat;
            });

            if (sepet.length === 0) {
                liste.innerHTML = "<li>Sepetiniz henüz boş.</li>";
            }

            toplamTutar.innerText = "Toplam: " + toplam + " AZN";
        }

        function urunuSil(index) {
            sepet.splice(index, 1);
            sepetiAc();
            document.getElementById("sepet-sayisi").innerText = sepet.length;
        }

        function sepetiKapat() {
            document.getElementById("sepet-modal").style.display = "none";
        }

        function whatsappSiparisVer() {
            if (sepet.length === 0) {
                alert("Sepetiniz boş, lütfen önce ürün ekleyin.");
                return;
            }
            let mesaj = "Merhaba, web sitenizden şu ürünleri sipariş etmek istiyorum:%0A";
            let toplam = 0;
            sepet.forEach(urun => {
                mesaj += `- ${urun.isim} (${urun.fiyat} AZN)%0A`;
                toplam += urun.fiyat;
            });
            mesaj += `%0AToplam Tutar: ${toplam} AZN`;
            let telefon = "+994513677405";
            window.open(`https://wa.me/${telefon}?text=${mesaj}`, "_blank");
        }
    </script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>